{% import "macros/pagination.njk" as p %}
{% import "macros/card.njk" as c %}

<!-- Index page: featured post + grid -->
{% macro homePagePostsGrid(postsPage) %}
{% set featuredPost = postsPage.items[0] %}
{% if featuredPost %}
{{ c.featuredCard(featuredPost) }}
{% if postsPage.postsPerPage == 1 and postsPage.total > 1 %}
<div>
  {{ p.paginationHomePage(postsPage) }}
</div>
{% endif %}
{% endif %}

<div class="w-full max-w-6xl mx-auto px-6 sm:px-8" x-data="fadeObserver">
  <div class="grid sm:grid-cols-2 xl:grid-cols-3 gap-8">
    {% for post in postsPage.items %}
    {% if not loop.first %}
    <div data-sage-animate>
      {{ c.postCard(post) }}
    </div>
    {% endif %}
    {% endfor %}
  </div>
  {% if postsPage.total > postsPage.postsPerPage %}
    {{ p.paginationHomePage(postsPage) }}
  {% endif %}
</div>
{% endmacro %}

<!-- Grid of posts for pages (tags, categories, authors) -->
{% macro postsGrid(posts, type) %}
<div class="w-full max-w-6xl mx-auto px-6 sm:px-8" x-data="fadeObserver">
  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
    {% for post in posts.items %}
    <div data-sage-animate>
      {{ c.postCard(post) }}
    </div>
    {% endfor %}
  </div>
  {{ p.pagination(posts, type) }}
</div>
{% endmacro %}
