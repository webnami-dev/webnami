<!-- Index page featured post -->
{% macro indexPostlistMacro(postsPage) %}
<!-- Featured Post -->
{% set featuredPost = postsPage.items[0] %} {% if featuredPost %}
<div class="w-full md:w-4/5 px-5 py-5 mx-auto flex flex-wrap mb-12">
  <a
    href="{{ featuredPost.url }}"
    class="lg:w-1/2 w-full overflow-hidden mt-6 sm:mt-0"
  >
    <img
      class="object-center w-full h-full rounded-md"
      src="{{ featuredPost.data.img }}"
      alt="{{ featuredPost.data.imgAlt }}"
    />
  </a>
  <div
    class="flex flex-wrap mt-6 lg:mt-auto mb-auto lg:w-1/2 content-start lg:p-4"
  >
    <div class="w-full sm:p-4 mb-6">
      <h2
        class="title-font font-medium sm:text-3xl text-2xl mb-4 text-stats-heading"
      >
        <a
          href="{{ featuredPost.url }}"
          class="hover:text-primary-500 transition-colors"
        >
          {{ featuredPost.data.heading }}
        </a>
      </h2>
      <p class="hidden sm:block sm:mb-4">
        {{ featuredPost.templateContent | excerpt }}
      </p>
      <p class="leading-relaxed text-accent text-sm mb-2">
        {% if featuredPost.data.author %}By {{ featuredPost.data.author }} | {%
        endif %}{{ featuredPost.data.date | postDate }}
      </p>
      <div class="flex">
        <p
          class="leading-relaxed px-4 py-1 text-sm rounded-xl bg-primary-100 text-primary-500 font-medium"
        >
          {{ featuredPost.data.category }}
        </p>
      </div>
    </div>
  </div>
</div>
{% if postsPage.postsPerPage == 1 and postsPage.total > 1 %}
<div>
  <div class="flex justify-center">
    <a
      href="/posts/{{ postsPage.page + 1 }}"
      class="inline-block bg-primary-500 text-white px-4 py-2 rounded-xl hover:bg-primary-800 transition-colors"
    >
      View Older Posts
    </a>
  </div>
</div>
{% endif %} {% endif %}

<!-- Regular Posts Grid (Remaining Items) -->

<div class="w-full md:w-4/5 px-5 py-5 mx-auto">
  <div class="grid md:grid-cols-2 xl:grid-cols-3 gap-6">
    {% for post in postsPage.items %} {% if not loop.first %}
    <a
      class="group flex flex-col h-full focus:outline-none"
      href="{{ post.url }}"
    >
      <div class="flex-shrink-0 h-60 w-full">
        <img
          class="w-full h-full object-cover rounded-md"
          src="{{ post.data.img }}"
          alt="{{ post.data.imgAlt }}"
        />
      </div>
      <div class="my-6 flex-grow">
        <h2
          class="sm:text-2xl text-xl font-semibold group-hover:text-primary-500 mb-2"
        >
          {{ post.data.heading }}
        </h2>
        <p class="hidden sm:block sm:mb-4">
          {{ post.templateContent | excerpt }}
        </p>
        <p class="leading-relaxed text-accent text-sm mb-2">
          {% if post.data.author %}By {{ post.data.author }} | {% endif %}{{
            post.data.date | postDate
          }}
        </p>
        <div class="flex">
          <p
            class="leading-relaxed px-4 py-1 text-sm rounded-xl bg-primary-100 text-primary-500 font-medium"
          >
            {{ post.data.category }}
          </p>
        </div>
      </div>
    </a>
    {% endif %} {% endfor %}
  </div>
  {% if postsPage.total > postsPage.postsPerPage %}
  <div class="flex justify-center my-8">
    <a
      href="/posts/{{ postsPage.page + 1 }}"
      class="inline-block bg-primary-500 text-white px-4 py-2 rounded-xl hover:bg-primary-800 transition-colors"
    >
      View Older Posts
    </a>
  </div>
  {% endif %}
</div>
{% endmacro %}

<!-- Post List for other pages-->
{% macro postlistMacro(posts, type) %}
<div class="w-full md:w-4/5 px-5 py-5 mx-auto">
  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for post in posts.items %}
    <a
      class="group flex flex-col h-full focus:outline-none rounded-xl"
      href="{{ post.url }}"
    >
      <div class="flex-shrink-0 h-60 w-full">
        <img
          class="w-full h-full object-cover rounded-md"
          src="{{ post.data.img }}"
          alt="{{ post.data.imgAlt }}"
        />
      </div>
      <div class="my-6 flex-grow">
        <h2
          class="sm:text-2xl text-xl font-semibold group-hover:text-primary-500 mb-2"
        >
          {{ post.data.heading }}
        </h2>
        <p class="hidden sm:block sm:mb-4">
          {{ post.templateContent | excerpt }}
        </p>
        <p class="leading-relaxed text-accent text-sm mb-2">
          {% if post.data.author %}By {{ post.data.author }} | {% endif %}{{
            post.data.date | postDate
          }}
        </p>
        <div class="flex">
          <p
            class="leading-relaxed px-4 py-1 text-sm rounded-xl bg-primary-100 text-primary-500 font-medium"
          >
            {{ post.data.category }}
          </p>
        </div>
      </div>
    </a>
    {% endfor %}
  </div>
  <!-- Pagination Navigation -->
  {% if posts.total > config.postsPerPage %}
  <div class="flex justify-between items-center gap-4 my-8">
    {% set totalPages = (posts.total / config.postsPerPage) | round(0, "ceil")
    %} {% if posts.page > 1 %}
    <div class="text-left">
      <a
        href="{% if type == 'posts' and posts.page <= 2 %}/{% else %}/{{
          type
        }}{% if type != 'posts' %}/{{
          posts.name | slugify
        }}{% endif %}/{% if posts.page > 2 %}{{
          posts.page - 1
        }}/{% endif %}{% endif %}"
        class="px-3 py-3 text-sm bg-primary-500 text-white rounded-xl font-medium hover:bg-primary-500 transition-colors"
        >← Previous</a
      >
    </div>
    {% else %}
    <div></div>
    {% endif %} {% if posts.page < totalPages %}
    <div class="text-right">
      <a
        href="/{{ type }}{% if type != 'posts' %}/{{
          posts.name | slugify
        }}{% endif %}/{{ posts.page + 1 }}/"
        class="px-3 py-3 text-sm bg-primary-500 text-white rounded-xl font-medium hover:bg-primary-500 transition-colors"
        >Next →</a
      >
    </div>
    {% else %}
    <div></div>
    {% endif %}
  </div>
  {% endif %}
</div>
{% endmacro %}
