<div
  x-data="alertComponent"
  x-init="init()"
  class="fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-xs w-full pointer-events-none"
>
  <template x-for="(alert, index) in alerts" :key="alert.id">
    <div
      x-show="alert.visible"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 translate-y-1 scale-95"
      x-transition:enter-end="opacity-100 translate-y-0 scale-100"
      x-transition:leave="transition ease-in duration-150"
      x-transition:leave-start="opacity-100 translate-y-0 scale-100"
      x-transition:leave-end="opacity-0 translate-y-1 scale-95"
      class="pointer-events-auto flex items-start gap-3 px-4 py-3 rounded border text-[13px]"
      style="box-shadow: 0 4px 16px rgba(0,0,0,0.12);"
      :class="alert.type === 'success' ? 'alert-success' : alert.type === 'warning' ? 'alert-warning' : 'alert-error'"
    >
      <span x-text="alert.message" class="flex-1 leading-snug"></span>
      <button
        @click="dismiss(alert.id)"
        class="shrink-0 mt-0.5 opacity-50 hover:opacity-100 transition-opacity duration-100"
        aria-label="Dismiss"
      >
        <i data-lucide="x" style="width:13px;height:13px;"></i>
      </button>
    </div>
  </template>
</div>

<!-- Confirm dialog -->
<div
  x-data
  x-show="$store.confirm.open"
  x-transition:enter="transition ease-out duration-150"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-100"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
  class="fixed inset-0 z-[200] flex items-center justify-center"
  id="confirm-dialog"
>
  <div
    class="bg-black/50 absolute inset-0"
    style="backdrop-filter: blur(2px);"
    @click="$store.confirm.cancel()"
  ></div>
  <div
    x-show="$store.confirm.open"
    x-transition:enter="transition ease-out duration-150"
    x-transition:enter-start="opacity-0 scale-95"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-95"
    class="relative rounded p-6 max-w-sm w-full mx-4"
    style="background-color: var(--color-surface-raised); border: 1px solid var(--color-border); box-shadow: 0 8px 40px rgba(0,0,0,0.2);"
  >
    <p x-text="$store.confirm.message" class="text-[13.5px] mb-5" style="color: var(--color-content); line-height: 1.5;"></p>
    <div class="flex items-center justify-end gap-2">
      <button
        @click="$store.confirm.cancel()"
        class="px-3.5 py-2 rounded text-[13px] font-medium transition-colors duration-100"
        style="color: var(--color-content); border: 1px solid var(--color-border); background-color: var(--color-surface);"
        onmouseover="this.style.backgroundColor='var(--color-hover)';"
        onmouseout="this.style.backgroundColor='var(--color-surface)';"
        id="confirm-cancel"
      >
        Cancel
      </button>
      <button
        @click="$store.confirm.accept()"
        class="confirm-delete-btn px-3.5 py-2 rounded text-[13px] font-medium text-white transition-opacity duration-100"
        onmouseover="this.style.opacity='0.88';"
        onmouseout="this.style.opacity='1';"
        id="confirm-accept"
      >
        Delete
      </button>
    </div>
  </div>
</div>
