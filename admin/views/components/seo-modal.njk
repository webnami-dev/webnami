<div
  x-data
  x-show="$store.seo.open"
  x-transition:enter="transition ease-out duration-150"
  x-transition:enter-start="opacity-0"
  x-transition:enter-end="opacity-100"
  x-transition:leave="transition ease-in duration-100"
  x-transition:leave-start="opacity-100"
  x-transition:leave-end="opacity-0"
  class="fixed inset-0 z-[200] flex items-center justify-center"
  id="seo-modal"
>
  <div
    class="absolute inset-0"
    style="background-color: rgba(0,0,0,0.4); backdrop-filter: blur(2px);"
    @click="$store.seo.close()"
  ></div>
  <div
    x-show="$store.seo.open"
    x-transition:enter="transition ease-out duration-150"
    x-transition:enter-start="opacity-0 scale-95"
    x-transition:enter-end="opacity-100 scale-100"
    x-transition:leave="transition ease-in duration-100"
    x-transition:leave-start="opacity-100 scale-100"
    x-transition:leave-end="opacity-0 scale-95"
    class="relative rounded max-w-lg w-full mx-4 max-h-[78vh] overflow-y-auto"
    style="background-color: var(--color-surface-raised); border: 1px solid var(--color-border); box-shadow: 0 8px 40px rgba(0,0,0,0.2);"
  >
    <!-- Modal header -->
    <div class="flex items-center justify-between px-5 py-4" style="border-bottom: 1px solid var(--color-border-subtle);">
      <h2 class="text-[14px] font-semibold" style="color: var(--color-content);">SEO Analysis</h2>
      <button
        @click="$store.seo.close()"
        class="p-1 rounded transition-colors duration-100"
        style="color: var(--color-accent);"
        onmouseover="this.style.color='var(--color-content)'; this.style.backgroundColor='var(--color-hover)';"
        onmouseout="this.style.color='var(--color-accent)'; this.style.backgroundColor='';"
        aria-label="Close"
      >
        <i data-lucide="x" style="width:15px;height:15px;"></i>
      </button>
    </div>

    <!-- Modal body -->
    <div class="px-5 py-4">
      <template x-if="$store.seo.loading">
        <div class="flex items-center justify-center py-10">
          <div
            class="animate-spin rounded-full h-6 w-6"
            style="border: 2px solid var(--color-border); border-top-color: var(--color-primary);"
          ></div>
        </div>
      </template>

      <template x-if="$store.seo.error">
        <p class="text-[13px] py-4" style="color: var(--color-alert-error-text);" x-text="$store.seo.error"></p>
      </template>

      <template x-if="!$store.seo.loading && !$store.seo.error && $store.seo.result">
        <div>
          <!-- Summary badges -->
          <div class="flex items-center gap-3 mb-4">
            <span
              class="inline-flex items-center gap-1 text-[12px] font-medium px-2 py-0.5 rounded"
              style="background-color: var(--color-alert-success-bg); color: var(--color-alert-success-text);"
              x-text="$store.seo.result.summary.passed + ' passed'"
            ></span>
            <span
              class="inline-flex items-center gap-1 text-[12px] font-medium px-2 py-0.5 rounded"
              style="background-color: var(--color-alert-error-bg); color: var(--color-alert-error-text);"
              x-text="$store.seo.result.summary.failed + ' failed'"
            ></span>
            <template x-if="$store.seo.result.summary.info > 0">
              <span
                class="inline-flex items-center gap-1 text-[12px] font-medium px-2 py-0.5 rounded"
                style="background-color: color-mix(in srgb, var(--color-primary) 12%, transparent); color: var(--color-primary);"
                x-text="$store.seo.result.summary.info + ' info'"
              ></span>
            </template>
          </div>
          <!-- Checks list -->
          <ul class="flex flex-col gap-0">
            <template x-for="check in $store.seo.result.checks" :key="check.name">
              <li
                class="flex items-start gap-3 py-3 text-[13px]"
                style="border-bottom: 1px solid var(--color-border-subtle);"
              >
                <span
                  class="shrink-0 mt-0.5 w-4 h-4 flex items-center justify-center rounded-full text-[10px] font-bold"
                  :style="check.status === 'pass'
                    ? 'background-color: var(--color-alert-success-bg); color: var(--color-alert-success-text);'
                    : check.status === 'fail'
                    ? 'background-color: var(--color-alert-error-bg); color: var(--color-alert-error-text);'
                    : 'background-color: color-mix(in srgb, var(--color-primary) 12%, transparent); color: var(--color-primary);'"
                  x-text="check.status === 'pass' ? '\u2713' : check.status === 'fail' ? '\u2717' : 'i'"
                ></span>
                <div class="min-w-0">
                  <p class="font-medium mb-0.5" style="color: var(--color-content);" x-text="check.name"></p>
                  <p class="text-[12px]" style="color: var(--color-accent);" x-text="check.message"></p>
                </div>
              </li>
            </template>
          </ul>
        </div>
      </template>
    </div>
  </div>
</div>
