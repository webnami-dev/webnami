{% extends "base.njk" %}

{% block content %}
  <div x-data="{ panelOpen: false }">
    <!-- Header -->
    <div class="flex items-center justify-between mb-7">
      <div class="flex items-center gap-3 min-w-0">
        <a href="/admin/pages"
          class="shrink-0 p-1.5 rounded transition-colors duration-100"
          style="color: var(--color-accent);"
          onmouseover="this.style.color='var(--color-content)'; this.style.backgroundColor='var(--color-hover)';"
          onmouseout="this.style.color='var(--color-accent)'; this.style.backgroundColor='';"
          aria-label="Back to pages"
          >
          <i data-lucide="arrow-left" style="width:16px;height:16px;"></i>
        </a>
        <div>
          <h1 class="text-[11px] font-medium" style="color: var(--color-accent); letter-spacing: 0.06em; text-transform: uppercase;">New Page</h1>
        </div>
      </div>
      <div class="flex items-center gap-2 shrink-0">
        <button type="button"
          @click="panelOpen = !panelOpen"
          class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-[12.5px] font-medium transition-colors duration-100"
          :style="panelOpen
            ? 'color: var(--color-content); border: 1px solid var(--color-border); background-color: var(--color-hover);'
            : 'color: var(--color-accent); border: 1px solid var(--color-border); background-color: var(--color-surface);'"
          >
          <i data-lucide="sliders-horizontal" style="width:13px;height:13px;"></i>
          Details
        </button>
      </div>
    </div>

    <!-- Form -->
    <form id="page-form" class="flex flex-col gap-5">

      <!-- Title -->
      <div>
        <input type="text" id="title" name="title" required
          class="admin-input text-[15px] font-medium"
          placeholder="Page title">
      </div>

      <!-- Content -->
      <div>
        <textarea id="content" name="content"></textarea>
      </div>

      <!-- Actions -->
      <div class="pt-1">
        <button type="submit"
          class="inline-flex items-center gap-1.5 px-4 py-2 rounded text-[13px] font-medium text-white transition-opacity duration-100"
          style="background-color: var(--color-primary);"
          onmouseover="this.style.opacity='0.88';"
          onmouseout="this.style.opacity='1';"
          >
          <i data-lucide="plus" style="width:14px;height:14px;"></i>
          Create Page
        </button>
      </div>

      <!-- Details panel -->
      <div
        x-show="panelOpen"
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 translate-x-4"
        x-transition:enter-end="opacity-100 translate-x-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-x-0"
        x-transition:leave-end="opacity-0 translate-x-4"
        class="fixed top-0 right-0 h-full z-40 flex flex-col"
        style="width: 30%; background-color: var(--color-surface); border-left: 1px solid var(--color-border); box-shadow: -6px 0 20px rgba(0,0,0,0.07);"
      >
        <!-- Panel header -->
        <div class="flex items-center justify-between px-5 py-4" style="border-bottom: 1px solid var(--color-border);">
          <span class="text-[11px] font-semibold" style="color: var(--color-accent); letter-spacing: 0.06em; text-transform: uppercase;">Page Details</span>
          <button type="button" @click="panelOpen = false"
            class="p-1 rounded transition-colors duration-100"
            style="color: var(--color-accent);"
            onmouseover="this.style.color='var(--color-content)'; this.style.backgroundColor='var(--color-hover)';"
            onmouseout="this.style.color='var(--color-accent)'; this.style.backgroundColor='';"
            aria-label="Close"
            >
            <i data-lucide="x" style="width:14px;height:14px;"></i>
          </button>
        </div>

        <!-- Panel fields -->
        <div class="flex flex-col gap-5 p-5 overflow-y-auto flex-1">
          <div>
            <label class="block text-[11px] font-medium mb-1.5" style="color: var(--color-accent);">Description</label>
            <textarea id="description" name="description" rows="4"
              class="admin-input resize-none"
              placeholder="Short description of the page"></textarea>
          </div>
        </div>
      </div>

    </form>
  </div>

  <script type="module" src="/admin/js/newPage.js"></script>
{% endblock %}
